<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Warranty Rules Module - Warranty Management System</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.1.3/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Source+Sans+Pro:wght@400;600;700&display=swap">
    <style>
        :root {
            --primary-color: #5b87a4;
            --secondary-color: #2e4154;
            --accent-color: #d35e5e;
            --light-color: #f5f7f9;
            --dark-color: #2c3e50;
            --code-bg: #f8f9fa;
            --border-color: #e9ecef;
            --method-color: #e3f2fd;
            --property-color: #fff3cd;
            --namespace-color: #d1e7dd;
        }
        
        body {
            font-family: 'Source Sans Pro', sans-serif;
            line-height: 1.6;
            color: #333;
            background-color: var(--light-color);
        }
        
        .navbar {
            background-color: var(--secondary-color);
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }
        
        .navbar-brand {
            font-weight: bold;
            color: white !important;
        }
        
        .sidebar {
            position: fixed;
            top: 56px;
            left: 0;
            width: 280px;
            height: calc(100vh - 56px);
            background-color: white;
            overflow-y: auto;
            transition: all 0.3s;
            z-index: 1000;
            padding: 0;
            box-shadow: inset -1px 0 0 rgba(0, 0, 0, .1);
        }
        
        .main-content {
            margin-left: 280px;
            padding: 20px 30px;
            background-color: white;
            min-height: calc(100vh - 56px);
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.05);
        }
        
        .nav-item {
            border-bottom: 1px solid var(--border-color);
        }
        
        .nav-link {
            color: var(--dark-color);
            padding: 0.8rem 1rem;
            font-size: 0.95rem;
        }
        
        .nav-link:hover {
            background-color: var(--light-color);
        }
        
        .nav-link.active {
            background-color: var(--light-color);
            color: var(--primary-color);
            font-weight: 600;
        }
        
        .nav-link .badge {
            font-size: 0.7rem;
            padding: 0.2rem 0.5rem;
            margin-left: 5px;
        }
        
        .section-title {
            color: var(--primary-color);
            font-weight: 700;
            margin-bottom: 1.5rem;
            padding-bottom: 0.5rem;
            border-bottom: 2px solid var(--border-color);
        }
        
        .subsection-title {
            color: var(--secondary-color);
            font-weight: 600;
            margin-top: 2rem;
            margin-bottom: 1rem;
        }
        
        code {
            background-color: var(--code-bg);
            padding: 0.2rem 0.4rem;
            border-radius: 3px;
            font-size: 0.9em;
            color: var(--accent-color);
        }
        
        pre {
            background-color: var(--code-bg);
            padding: 1rem;
            border-radius: 5px;
            border: 1px solid var(--border-color);
            overflow-x: auto;
        }
        
        .method-container, .property-container {
            margin-bottom: 2rem;
            padding: 1rem;
            border-radius: 5px;
            border: 1px solid var(--border-color);
        }
        
        .method-container {
            background-color: var(--method-color);
        }
        
        .property-container {
            background-color: var(--property-color);
        }
        
        .method-name, .property-name {
            font-weight: 600;
            color: var(--secondary-color);
        }
        
        .method-signature {
            font-family: monospace;
            padding: 0.5rem;
            background-color: rgba(255, 255, 255, 0.7);
            border-radius: 3px;
            margin: 0.5rem 0;
            overflow-x: auto;
        }
        
        .param-table {
            width: 100%;
            margin: 1rem 0;
        }
        
        .param-table th {
            background-color: rgba(0, 0, 0, 0.05);
            text-align: left;
            padding: 0.5rem;
        }
        
        .param-table td {
            padding: 0.5rem;
            border-bottom: 1px solid var(--border-color);
        }
        
        .param-name {
            font-family: monospace;
            font-weight: 600;
        }
        
        .param-type {
            color: var(--primary-color);
            font-family: monospace;
        }
        
        .return-value {
            margin-top: 1rem;
            padding: 0.5rem;
            background-color: rgba(255, 255, 255, 0.7);
            border-radius: 3px;
        }
        
        .namespace-badge {
            display: inline-block;
            background-color: var(--namespace-color);
            padding: 0.3rem 0.6rem;
            border-radius: 3px;
            font-size: 0.8rem;
            margin-bottom: 1rem;
        }
        
        .description {
            margin-bottom: 1rem;
        }
        
        .breadcrumb {
            background-color: transparent;
            padding: 0;
            margin-bottom: 1.5rem;
        }
        
        .breadcrumb-item a {
            color: var(--primary-color);
            text-decoration: none;
        }
        
        .breadcrumb-item.active {
            color: var(--dark-color);
        }
        
        .toc {
            background-color: var(--light-color);
            padding: 1rem;
            border-radius: 5px;
            margin-bottom: 2rem;
        }
        
        .toc-title {
            font-weight: 600;
            margin-bottom: 0.5rem;
        }
        
        .toc-list {
            list-style-type: none;
            padding-left: 0;
        }
        
        .toc-list li {
            margin-bottom: 0.5rem;
        }
        
        .toc-list a {
            color: var(--primary-color);
            text-decoration: none;
        }
        
        .search-container {
            padding: 1rem;
            border-bottom: 1px solid var(--border-color);
        }
        
        .search-container input {
            width: 100%;
            padding: 0.5rem;
            border: 1px solid var(--border-color);
            border-radius: 3px;
        }
        
        .alert-info {
            background-color: #e3f2fd;
            border-color: #b6d4fe;
            color: #0a58ca;
        }
    </style>
</head>
<body>
    <nav class="navbar navbar-dark fixed-top">
        <div class="container-fluid">
            <a class="navbar-brand" href="index.html">
                Warranty Management System
            </a>
        </div>
    </nav>

    <div class="sidebar">
        <div class="search-container">
            <input type="text" placeholder="Search documentation..." id="search-input">
        </div>
        <ul class="nav flex-column">
            <li class="nav-item">
                <a class="nav-link" href="index.html">
                    <i class="fas fa-home me-2"></i> Overview
                </a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="modules.html">
                    <i class="fas fa-cubes me-2"></i> Modules
                </a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="admin_module.html">
                    <i class="fas fa-user-shield me-2"></i> Admin Module
                </a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="claims_module.html">
                    <i class="fas fa-file-alt me-2"></i> Claims Module
                </a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="reports_module.html">
                    <i class="fas fa-chart-bar me-2"></i> Reports Module
                </a>
            </li>
            <li class="nav-item">
                <a class="nav-link active" href="warranty_rules.html">
                    <i class="fas fa-gavel me-2"></i> Warranty Rules
                </a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="database_schema.html">
                    <i class="fas fa-database me-2"></i> Database Schema
                </a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="api_reference.html">
                    <i class="fas fa-code me-2"></i> API Reference
                </a>
            </li>
        </ul>
    </div>

    <div class="main-content">
        <nav aria-label="breadcrumb">
            <ol class="breadcrumb">
                <li class="breadcrumb-item"><a href="index.html">Home</a></li>
                <li class="breadcrumb-item"><a href="modules.html">Modules</a></li>
                <li class="breadcrumb-item active">Warranty Rules</li>
            </ol>
        </nav>

        <h1 class="section-title">Warranty Rules Module</h1>
        
        <div class="namespace-badge">
            <i class="fas fa-folder me-1"></i> WarrantySystem\Rules
        </div>
        
        <div class="description">
            <p>The Warranty Rules Module allows administrators to define and manage warranty policies for different product types. This ensures consistent application of warranty terms across all claims and provides clear guidelines for claim processing.</p>
        </div>
        
        <div class="toc">
            <div class="toc-title">Table of Contents</div>
            <ul class="toc-list">
                <li><a href="#overview">Module Overview</a></li>
                <li><a href="#files">Key Files</a></li>
                <li><a href="#functions">Core Functions</a></li>
                <li><a href="#database">Database Structure</a></li>
                <li><a href="#usage">Using Warranty Rules</a></li>
            </ul>
        </div>
        
        <h2 class="subsection-title" id="overview">Module Overview</h2>
        <p>The Warranty Rules Module defines the terms and conditions under which warranty claims are processed. It allows administrators to specify warranty durations, coverage details, and exclusions for different product types. These rules are then used during the claim processing workflow to determine claim validity and guide approval decisions.</p>
        
        <h2 class="subsection-title" id="files">Key Files</h2>
        
        <div class="method-container">
            <div class="method-name">warranty_rules.php</div>
            <div class="method-signature">Path: /admin/warranty_rules.php</div>
            <div class="description">
                <p>Main file for warranty rules management. Handles listing, creation, editing, and deletion of warranty rules.</p>
                <p>This file includes functionality for:</p>
                <ul>
                    <li>Displaying all warranty rules in a sortable and filterable table</li>
                    <li>Adding new warranty rules through a modal form</li>
                    <li>Editing existing warranty rules</li>
                    <li>Deleting warranty rules</li>
                    <li>Creating the warranty_rules table if it doesn't exist</li>
                </ul>
            </div>
        </div>
        
        <h2 class="subsection-title" id="functions">Core Functions</h2>
        
        <div class="method-container">
            <div class="method-name">addWarrantyRule</div>
            <div class="method-signature">function addWarrantyRule($productType, $duration, $coverage, $exclusions, $userId)</div>
            <div class="description">
                <p>Adds a new warranty rule to the system.</p>
                
                <table class="param-table">
                    <thead>
                        <tr>
                            <th>Parameter</th>
                            <th>Type</th>
                            <th>Description</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td class="param-name">$productType</td>
                            <td class="param-type">string</td>
                            <td>The type of product the rule applies to</td>
                        </tr>
                        <tr>
                            <td class="param-name">$duration</td>
                            <td class="param-type">int</td>
                            <td>Warranty duration in months</td>
                        </tr>
                        <tr>
                            <td class="param-name">$coverage</td>
                            <td class="param-type">string</td>
                            <td>Description of what is covered under warranty</td>
                        </tr>
                        <tr>
                            <td class="param-name">$exclusions</td>
                            <td class="param-type">string</td>
                            <td>Description of what is not covered under warranty</td>
                        </tr>
                        <tr>
                            <td class="param-name">$userId</td>
                            <td class="param-type">int</td>
                            <td>ID of the user creating the rule</td>
                        </tr>
                    </tbody>
                </table>
                
                <div class="return-value">
                    <strong>Returns:</strong> <span class="param-type">int</span> - The ID of the newly created warranty rule
                </div>
            </div>
        </div>
        
        <div class="method-container">
            <div class="method-name">updateWarrantyRule</div>
            <div class="method-signature">function updateWarrantyRule($id, $productType, $duration, $coverage, $exclusions)</div>
            <div class="description">
                <p>Updates an existing warranty rule.</p>
                
                <table class="param-table">
                    <thead>
                        <tr>
                            <th>Parameter</th>
                            <th>Type</th>
                            <th>Description</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td class="param-name">$id</td>
                            <td class="param-type">int</td>
                            <td>ID of the warranty rule to update</td>
                        </tr>
                        <tr>
                            <td class="param-name">$productType</td>
                            <td class="param-type">string</td>
                            <td>The type of product the rule applies to</td>
                        </tr>
                        <tr>
                            <td class="param-name">$duration</td>
                            <td class="param-type">int</td>
                            <td>Warranty duration in months</td>
                        </tr>
                        <tr>
                            <td class="param-name">$coverage</td>
                            <td class="param-type">string</td>
                            <td>Description of what is covered under warranty</td>
                        </tr>
                        <tr>
                            <td class="param-name">$exclusions</td>
                            <td class="param-type">string</td>
                            <td>Description of what is not covered under warranty</td>
                        </tr>
                    </tbody>
                </table>
                
                <div class="return-value">
                    <strong>Returns:</strong> <span class="param-type">bool</span> - True on success, false on failure
                </div>
            </div>
        </div>
        
        <div class="method-container">
            <div class="method-name">deleteWarrantyRule</div>
            <div class="method-signature">function deleteWarrantyRule($id)</div>
            <div class="description">
                <p>Deletes a warranty rule from the system.</p>
                
                <table class="param-table">
                    <thead>
                        <tr>
                            <th>Parameter</th>
                            <th>Type</th>
                            <th>Description</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td class="param-name">$id</td>
                            <td class="param-type">int</td>
                            <td>ID of the warranty rule to delete</td>
                        </tr>
                    </tbody>
                </table>
                
                <div class="return-value">
                    <strong>Returns:</strong> <span class="param-type">bool</span> - True on success, false on failure
                </div>
            </div>
        </div>
        
        <div class="method-container">
            <div class="method-name">getWarrantyRules</div>
            <div class="method-signature">function getWarrantyRules()</div>
            <div class="description">
                <p>Retrieves all warranty rules from the database.</p>
                
                <div class="return-value">
                    <strong>Returns:</strong> <span class="param-type">array</span> - Array of warranty rules
                </div>
            </div>
        </div>
        
        <div class="method-container">
            <div class="method-name">getWarrantyRuleByProductType</div>
            <div class="method-signature">function getWarrantyRuleByProductType($productType)</div>
            <div class="description">
                <p>Retrieves a warranty rule for a specific product type.</p>
                
                <table class="param-table">
                    <thead>
                        <tr>
                            <th>Parameter</th>
                            <th>Type</th>
                            <th>Description</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td class="param-name">$productType</td>
                            <td class="param-type">string</td>
                            <td>The type of product to get the warranty rule for</td>
                        </tr>
                    </tbody>
                </table>
                
                <div class="return-value">
                    <strong>Returns:</strong> <span class="param-type">array|false</span> - Warranty rule array or false if not found
                </div>
            </div>
        </div>
        
        <h2 class="subsection-title" id="database">Database Structure</h2>
        
        <div class="method-container">
            <div class="method-name">warranty_rules</div>
            <div class="description">
                <p>The warranty_rules table stores all warranty policy information:</p>
                <pre>
CREATE TABLE `warranty_rules` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `product_type` varchar(100) NOT NULL,
  `duration` int(11) NOT NULL COMMENT 'Duration in months',
  `coverage` text NOT NULL COMMENT 'What is covered under warranty',
  `exclusions` text NOT NULL COMMENT 'What is not covered under warranty',
  `created_by` int(11) NOT NULL,
  `created_at` timestamp NOT NULL DEFAULT current_timestamp(),
  `updated_at` timestamp NOT NULL DEFAULT current_timestamp() ON UPDATE current_timestamp(),
  PRIMARY KEY (`id`),
  KEY `created_by` (`created_by`),
  CONSTRAINT `warranty_rules_ibfk_1` FOREIGN KEY (`created_by`) REFERENCES `users` (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci;
                </pre>
                
                <p>Table fields:</p>
                <ul>
                    <li><strong>id</strong>: Primary key</li>
                    <li><strong>product_type</strong>: Type of product the rule applies to</li>
                    <li><strong>duration</strong>: Warranty duration in months</li>
                    <li><strong>coverage</strong>: What is covered under warranty</li>
                    <li><strong>exclusions</strong>: What is not covered under warranty</li>
                    <li><strong>created_by</strong>: User ID of the creator (foreign key to users table)</li>
                    <li><strong>created_at</strong>: Timestamp of creation</li>
                    <li><strong>updated_at</strong>: Timestamp of last update</li>
                </ul>
            </div>
        </div>
        
        <h2 class="subsection-title" id="usage">Using Warranty Rules</h2>
        
        <div class="method-container">
            <div class="method-name">Viewing Warranty Rules</div>
            <div class="description">
                <p>The Warranty Rules page displays all defined warranty policies in a sortable and filterable table. Each rule includes:</p>
                <ul>
                    <li>Product Type</li>
                    <li>Warranty Duration (in months)</li>
                    <li>Coverage Details</li>
                    <li>Exclusions</li>
                    <li>Creation/Update Information</li>
                </ul>
            </div>
        </div>
        
        <div class="method-container">
            <div class="method-name">Adding New Warranty Rules</div>
            <div class="description">
                <p>To add a new warranty rule:</p>
                <ol>
                    <li>Click the "Add New Rule" button</li>
                    <li>Enter the following information:
                        <ul>
                            <li>Product Type (must be unique)</li>
                            <li>Duration (in months)</li>
                            <li>Coverage Details (what is covered under warranty)</li>
                            <li>Exclusions (what is not covered under warranty)</li>
                        </ul>
                    </li>
                    <li>Click "Save Rule"</li>
                </ol>
                <p>Note: Each product type can only have one warranty rule. If you try to add a rule for a product type that already has one, you will receive an error message.</p>
            </div>
        </div>
        
        <div class="method-container">
            <div class="method-name">Editing Warranty Rules</div>
            <div class="description">
                <p>To edit an existing warranty rule:</p>
                <ol>
                    <li>Click the "Edit" button for the rule you want to modify</li>
                    <li>Update the information as needed</li>
                    <li>Click "Update Rule"</li>
                </ol>
            </div>
        </div>
        
        <div class="method-container">
            <div class="method-name">Deleting Warranty Rules</div>
            <div class="description">
                <p>To delete a warranty rule:</p>
                <ol>
                    <li>Click the "Delete" button for the rule you want to remove</li>
                    <li>Confirm the deletion when prompted</li>
                </ol>
                <p>Note: Deleting a warranty rule will not affect existing claims that were processed using that rule.</p>
            </div>
        </div>
        
        <div class="method-container">
            <div class="method-name">Integration with Claims</div>
            <div class="description">
                <p>Warranty rules are used during the claim processing workflow to:</p>
                <ul>
                    <li>Verify if a product is still under warranty based on its delivery date</li>
                    <li>Determine what types of issues are covered</li>
                    <li>Provide guidelines for approving or rejecting claims</li>
                </ul>
                <p>When a new claim is submitted, the system checks the product type against the warranty rules to determine if the claim is valid based on the warranty duration and coverage details.</p>
            </div>
        </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.1.3/js/bootstrap.bundle.min.js"></script>
    <script>
        $(document).ready(function() {
            // Simple search functionality
            $("#search-input").on("keyup", function() {
                var value = $(this).val().toLowerCase();
                $(".nav-link").filter(function() {
                    $(this).toggle($(this).text().toLowerCase().indexOf(value) > -1)
                });
            });
        });
    </script>
</body>
</html>
